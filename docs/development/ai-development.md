# AI 开发指南

## 1. Cursor Agent 开发流程

### 1.1 开发阶段
1. 项目初始化阶段 ✓
   - 产品设计 ✓
   - 版本计划 ✓
   - 开发环境搭建 ✓

2. 项目计划阶段 ✓
   - 设计开发计划 ✓
   - 任务进度跟踪 ✓
   - 质量控制机制 ✓

3. 项目实施阶段 (进行中)
   - 原子功能分解 ✓
   - 功能开发 (进行中)
   - 测试与文档 (进行中)

### 1.2 当前状态
- 数据库模型设计完成
- 基础项目结构搭建完成
- 开发环境配置完成
- 任务管理API完成
- 任务列表组件开发完成
  - TaskList组件实现完成
  - TaskCard组件实现完成
  - TaskFilters组件实现完成
  - TaskSort组件实现完成
  - 所有组件单元测试完成
- 任务表单组件开发完成
  - TaskForm组件实现完成
  - 表单验证功能完成
  - 单元测试完成
- 任务管理页面开发完成
  - 组件集成完成
  - 布局实现完成
  - 交互功能实现完成
- 任务详情展示开发完成
  - TaskDetail组件实现完成
  - Badge组件实现完成
  - 单元测试完成
  - 任务详情数据获取实现完成
  - 任务详情展示布局实现完成
- 任务编辑功能开发完成
  - TaskEditForm组件实现完成
  - 表单验证功能完成
  - 错误处理完成
  - 加载状态完成
  - 单元测试完成
- 当前最小可执行任务列表已创建
  - 教务管理功能任务分解完成
  - 课程管理模块任务分解完成
  - 教师管理模块任务分解完成
  - 任务优先级已定义
  - 依赖关系已确定
- 课程数据模型已完成
  - 课程模型设计完成
  - 课程分类模型设计完成
  - 课程时间表模型设计完成
  - 课程资源模型设计完成
- 课程API开发进行中
  - 课程CRUD接口已完成
  - 课程分类CRUD接口已完成
  - 课程时间表接口开发中
  - 课程资源接口规划中

### 1.3 开发计划
#### 版本规划
- v0.1.0: 基础架构与用户认证 ✓
- v0.2.0: 任务管理核心功能 ✓
  - [x] 任务数据模型
  - [x] 任务管理API
  - [x] 任务列表组件
  - [x] 任务表单组件
  - [x] 任务管理页面组件集成
  - [x] 任务详情展示
    - [x] 任务详情组件
    - [x] 任务详情数据获取
    - [x] 任务详情展示布局
  - [x] 任务编辑功能
    - [x] 任务编辑API
    - [x] 任务编辑表单组件
    - [x] 任务编辑页面
- v0.3.0: 教务管理功能 (进行中)
  - [ ] 课程管理
    - [x] 课程数据模型
    - [ ] 课程API
      - [x] 课程CRUD接口
      - [x] 课程分类CRUD接口
      - [ ] 课程时间表CRUD接口
      - [ ] 课程资源CRUD接口
    - [ ] 课程组件
  - [ ] 教学计划
    - [ ] 教学计划数据模型
    - [ ] 教学计划API
    - [ ] 教学计划组件
  - [ ] 教务通知
    - [ ] 通知数据模型
    - [ ] 通知API
    - [ ] 通知组件
  - [ ] 教师管理
    - [ ] 教师信息管理
    - [ ] 教师课程分配
    - [ ] 教师考核管理
  - [ ] 学生管理
    - [ ] 学生信息管理
    - [ ] 学生课程管理
    - [ ] 学生成绩管理
- v0.4.0: 团队协作功能
- v0.5.0: 数据统计功能
- v0.6.0: 系统优化与完善

#### 当前版本 (v0.3.0) 计划：
详情：docs/development/tasks

### 1.4 文件索引
```
docs/
├── development/
│   ├── workflow.md          # 开发工作流指南
│   ├── ai-development.md    # AI开发指南
│   ├── cursor-guidelines.md # Cursor IDE使用指南
│   └── tasks/              # 开发任务分解
│       ├── v0.1.0-tasks.md # 基础架构与用户认证任务
│       ├── v0.2.0-tasks.md # 任务管理核心功能任务
│       ├── v0.3.0-tasks.md # 教务管理功能任务
│       ├── v0.4.0-tasks.md # 团队协作功能任务
│       ├── v0.5.0-tasks.md # 数据统计功能任务
│       ├── v0.6.0-tasks.md # 系统优化与完善任务
│       └── current-executable-tasks.md # 当前最小可执行任务列表
├── product/
│   ├── guide.md            # 产品文档编写规范
│   └── prd/
│       ├── product-design.md # 产品设计文档
│       ├── user-stories.md   # 用户故事
│       └── data-model.md     # 数据模型设计
└── test-reports/
    └── guide.md            # 测试文档编写规范

prisma/
└── schema.prisma           # 数据库模型定义

src/
├── app/                    # Next.js App Router 页面
│   ├── api/                # API 路由
│   │   ├── auth/           # 认证相关API
│   │   ├── courses/        # 课程相关API
│   │   │   └── [id]/       # 单个课程API
│   │   └── course-categories/ # 课程分类API
│   │       └── [id]/       # 单个课程分类API
├── components/            # React 组件
├── lib/                   # 工具函数和共享逻辑
└── types/                # TypeScript 类型定义
```

### 1.5 开发优先级
1. 用户认证系统
   - 登录/注册功能
   - 权限管理
   - 用户管理

2. 任务管理核心功能
   - 任务创建与分配
   - 任务状态管理
   - 任务列表视图

3. 教务管理功能
   - 课程管理
   - 教学计划
   - 教务通知

4. 团队协作功能
   - 团队管理
   - 任务协作
   - 通知系统

5. 数据统计功能
   - 任务统计
   - 教学质量分析
   - 报表生成

### 1.6 质量控制
- 代码规范检查
- 单元测试覆盖
- 集成测试
- 性能测试
- 安全测试

## 2. AI 提示词规范

### 2.1 基本原则
- 清晰明确的指令
- 完整的上下文信息
- 具体的输出要求
- 错误处理机制

### 2.2 提示词模板
1. 功能开发
```
开发任务：[具体功能描述]
输入：[需要的输入数据]
输出：[期望的输出结果]
要求：
- [具体要求1]
- [具体要求2]
- [具体要求3]
```

2. 代码审查
```
审查范围：[文件或代码块]
关注点：
- 代码质量
- 性能优化
- 安全问题
- 最佳实践
```

3. 问题修复
```
问题描述：[具体问题]
当前行为：[现有表现]
期望行为：[期望结果]
相关代码：[代码位置]
```

### 2.3 最佳实践
1. 代码生成
   - 提供完整上下文
   - 指定具体需求
   - 包含错误处理
   - 要求代码注释

2. 代码优化
   - 明确优化目标
   - 提供性能指标
   - 指定约束条件
   - 要求兼容性

3. 问题诊断
   - 提供错误信息
   - 描述复现步骤
   - 列出尝试方案
   - 指定期望结果

## 3. AI 开发规范

### 3.1 代码生成规范
- 使用TypeScript类型
- 遵循项目架构
- 保持代码风格
- 添加必要注释

### 3.2 代码审查规范
- 性能检查
- 安全审查
- 代码质量
- 测试覆盖

### 3.3 文档生成规范
- API文档
- 使用说明
- 开发指南
- 部署文档

## 3. 开发规则

### 3.1 开发中禁用枚举
### 3.2 开发中组件的导入方式为命名导入
### 3.3 当前任务判定规则
A验证是否存在未完成的当前执行计划 -> B
B不存在 -> C检查、更新项目文档并询问是否开启下一个版本计划（询问是否需要生成上一版本的单元测试报告），如开启需将新的计划更新到文档中
B存在 -> D是否存在未完成的当前最小可执行任务列表
D不存在 -> E根据当前执行计划，按照tasks中任务的详细描述，将任务分解成当前最小可执行任务列表（更新到文档中）
D存在、E -> F根据AI 开发指南和要求，继续开发工作
### 3.4 必须遵守执行步骤
当开发每个最小功能时请严格完整执行步骤（禁止构建测试）：
1.需求分析、技术栈分析并更新当前最小可执行任务列表；
2.按照开发计划编辑代码；
3.检查代码上下文及安全性；
4.进行文档更新；
5.使用git提交全部代码并推送至远程服务器。